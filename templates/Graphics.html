<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Визуализация профиля {{ user_id }}</title>
    <style>
        /* Стиль только для ссылки "/gigachat/" */
        a#gigachat-link {
            display: inline-block;
            padding: 10px 20px;
            margin-top: 20px;
            background: linear-gradient(45deg, #3b82f6, #6366f1);
            color: white !important;
            text-decoration: none;
            font-weight: bold;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            font-family: sans-serif;
        }

        a#gigachat-link:hover {
            background: linear-gradient(45deg, #2563eb, #4f46e5);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        }

        a#gigachat-link:active {
            transform: scale(0.98);
        }
    </style>
</head>
<body>
<h2>График: распределение постов по времени</h2>

<form method="get" style="margin-bottom: 20px;">
    <label>Цвет по постам:
        <select name="color_posts" onchange="this.form.submit()">
            <option value="Месяц" {% if color== 'Цвет' %} selected {% endif %}>Месяц</option>
            <option value="Год" {% if color== 'Город' %} selected {% endif %}>Год</option>
        </select>
    </label>

    <label>Цвет по друзьям:
        <select name="color_friends" onchange="this.form.submit()">
            <option value="Пол" {% if color== 'Цвет' %} selected {% endif %}>Пол</option>
            <option value="Город" {% if color== 'Город' %} selected {% endif %}>Город</option>
        </select>
    </label>

    <label>Тип графика:
        <select name="chart_type" onchange="this.form.submit()">
            <option value="bar" {% if chart_type== 'bar' %}selected{% endif %}>Столбчатый</option>
            <option value="pie" {% if chart_type== 'pie' %}selected{% endif %}>Круговой</option>
        </select>
    </label>

    <label>Тема:
        <select name="theme" onchange="this.form.submit()">
            <option value="plotly" {% if theme== 'plotly' %}selected{% endif %}>Plotly</option>
            <option value="plotly_dark" {% if theme== 'plotly_dark' %}selected{% endif %}>Тёмная</option>
            <option value="ggplot2" {% if theme== 'ggplot2' %}selected{% endif %}>ggplot2</option>
            <option value="seaborn" {% if theme== 'seaborn' %}selected{% endif %}>Seaborn</option>
        </select>
    </label>
</form>

{{ graph_html|safe }}
<br/>
{{ graph2|safe }}

<p>Имя пользователя: {{metrics.base_info.first_name }} {{metrics.base_info.last_name }}</p>
<a id="gigachat-link" href="/gigachat/">Анализ через GigaChat</a>
<a href="/profile/">Назад</a>
</body>
</html>